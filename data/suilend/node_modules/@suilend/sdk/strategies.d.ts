import { AggregatorClient as CetusSdk } from "@cetusprotocol/aggregator-sdk";
import { CoinMetadata, DevInspectResults, SuiClient } from "@mysten/sui/client";
import { Transaction, TransactionArgument, TransactionObjectInput } from "@mysten/sui/transactions";
import BigNumber from "bignumber.js";
import { LstClient } from "@suilend/springsui-sdk";
import { LiquidStakingInfo } from "@suilend/springsui-sdk/_generated/liquid_staking/liquid-staking/structs";
import { SuilendClient } from "./client";
import { RewardsMap } from "./lib";
import { RewardMap } from "./lib/liquidityMining";
import { StrategyType } from "./lib/strategyOwnerCap";
import { ParsedObligation, ParsedReserve } from "./parsers";
export declare const STRATEGY_E: number;
export declare const LST_DECIMALS = 9;
export type StrategyDeposit = {
    coinType: string;
    depositedAmount: BigNumber;
};
export type StrategyWithdraw = {
    coinType: string;
    withdrawnAmount: BigNumber;
};
export declare enum StrategyFlashLoanProvider {
    MMT = "mmt"
}
export declare const STRATEGY_TYPE_FLASH_LOAN_OBJ_MAP: Record<StrategyType, {
    provider: StrategyFlashLoanProvider;
    poolId: string;
    coinTypeA: string;
    coinTypeB: string;
    borrowA: boolean;
    feePercent: number;
}>;
export declare const getReserveSafeDepositLimit: (reserve: ParsedReserve) => {
    safeDepositLimit: BigNumber;
    safeDepositLimitUsd: BigNumber;
};
export declare const addOrInsertStrategyDeposit: (_deposits: StrategyDeposit[], deposit: StrategyDeposit) => StrategyDeposit[];
export declare const hasStrategyPosition: (obligation: ParsedObligation) => boolean;
export declare const getStrategySuiReserve: (reserveMap: Record<string, ParsedReserve>) => {
    config: {
        $typeName: string;
        openLtvPct: number;
        closeLtvPct: number;
        maxCloseLtvPct: number;
        borrowWeightBps: BigNumber;
        depositLimit: BigNumber;
        borrowLimit: BigNumber;
        liquidationBonusBps: number;
        maxLiquidationBonusBps: number;
        depositLimitUsd: BigNumber;
        borrowLimitUsd: BigNumber;
        borrowFeeBps: number;
        spreadFeeBps: number;
        protocolLiquidationFeeBps: number;
        isolated: boolean;
        openAttributedBorrowLimitUsd: number;
        closeAttributedBorrowLimitUsd: number;
        interestRate: {
            id: string;
            utilPercent: BigNumber;
            aprPercent: BigNumber;
        }[];
    };
    $typeName: string;
    id: string;
    arrayIndex: bigint;
    coinType: string;
    mintDecimals: number;
    priceIdentifier: string;
    price: BigNumber;
    smoothedPrice: BigNumber;
    minPrice: BigNumber;
    maxPrice: BigNumber;
    priceLastUpdateTimestampS: bigint;
    availableAmount: BigNumber;
    ctokenSupply: BigNumber;
    borrowedAmount: BigNumber;
    cumulativeBorrowRate: BigNumber;
    interestLastUpdateTimestampS: bigint;
    unclaimedSpreadFees: BigNumber;
    attributedBorrowValue: BigNumber;
    depositsPoolRewardManager: {
        $typeName: string;
        id: string;
        totalShares: bigint;
        poolRewards: {
            $typeName: string;
            id: string;
            poolRewardManagerId: string;
            coinType: string;
            startTimeMs: number;
            endTimeMs: number;
            totalRewards: BigNumber;
            allocatedRewards: BigNumber;
            cumulativeRewardsPerShare: BigNumber;
            numUserRewardManagers: bigint;
            rewardIndex: number;
            symbol: string;
            mintDecimals: number;
        }[];
        lastUpdateTimeMs: bigint;
    };
    borrowsPoolRewardManager: {
        $typeName: string;
        id: string;
        totalShares: bigint;
        poolRewards: {
            $typeName: string;
            id: string;
            poolRewardManagerId: string;
            coinType: string;
            startTimeMs: number;
            endTimeMs: number;
            totalRewards: BigNumber;
            allocatedRewards: BigNumber;
            cumulativeRewardsPerShare: BigNumber;
            numUserRewardManagers: bigint;
            rewardIndex: number;
            symbol: string;
            mintDecimals: number;
        }[];
        lastUpdateTimeMs: bigint;
    };
    availableAmountUsd: BigNumber;
    borrowedAmountUsd: BigNumber;
    depositedAmount: BigNumber;
    depositedAmountUsd: BigNumber;
    cTokenExchangeRate: BigNumber;
    borrowAprPercent: BigNumber;
    depositAprPercent: BigNumber;
    utilizationPercent: BigNumber;
    token: {
        decimals: number;
        description: string;
        iconUrl?: string | null;
        id?: string | null;
        name: string;
        symbol: string;
        coinType: string;
    };
    symbol: string;
    name: string;
    iconUrl: string | null | undefined;
    description: string;
    totalDeposits: BigNumber;
};
export type StrategyLstMap = Record<string, {
    client: LstClient;
    liquidStakingInfo: LiquidStakingInfo<string>;
    mintFeePercent: BigNumber;
    redeemFeePercent: BigNumber;
    suiToLstExchangeRate: BigNumber;
    lstToSuiExchangeRate: BigNumber;
}>;
export declare const fetchStrategyLstMap: (suiClient: SuiClient) => Promise<StrategyLstMap | undefined>;
export declare const getStrategyLstMintFee: (lstMap: StrategyLstMap, lstCoinType: string, suiAmount: BigNumber) => BigNumber;
export declare const getStrategyLstRedeemFee: (lstMap: StrategyLstMap, lstCoinType: string, lstAmount: BigNumber) => BigNumber;
export declare const STRATEGY_TYPE_EXPOSURE_MAP: Record<StrategyType, {
    min: BigNumber;
    max: BigNumber;
    default: BigNumber;
}>;
export declare const getStrategyDepositReserves: (reserveMap: Record<string, ParsedReserve>, strategyType: StrategyType) => {
    base?: ParsedReserve;
    lst?: ParsedReserve;
};
export declare const getStrategyBorrowReserve: (reserveMap: Record<string, ParsedReserve>, strategyType: StrategyType) => ParsedReserve;
export declare const getStrategyDefaultCurrencyReserve: (reserveMap: Record<string, ParsedReserve>, strategyType: StrategyType) => {
    config: {
        $typeName: string;
        openLtvPct: number;
        closeLtvPct: number;
        maxCloseLtvPct: number;
        borrowWeightBps: BigNumber;
        depositLimit: BigNumber;
        borrowLimit: BigNumber;
        liquidationBonusBps: number;
        maxLiquidationBonusBps: number;
        depositLimitUsd: BigNumber;
        borrowLimitUsd: BigNumber;
        borrowFeeBps: number;
        spreadFeeBps: number;
        protocolLiquidationFeeBps: number;
        isolated: boolean;
        openAttributedBorrowLimitUsd: number;
        closeAttributedBorrowLimitUsd: number;
        interestRate: {
            id: string;
            utilPercent: BigNumber;
            aprPercent: BigNumber;
        }[];
    };
    $typeName: string;
    id: string;
    arrayIndex: bigint;
    coinType: string;
    mintDecimals: number;
    priceIdentifier: string;
    price: BigNumber;
    smoothedPrice: BigNumber;
    minPrice: BigNumber;
    maxPrice: BigNumber;
    priceLastUpdateTimestampS: bigint;
    availableAmount: BigNumber;
    ctokenSupply: BigNumber;
    borrowedAmount: BigNumber;
    cumulativeBorrowRate: BigNumber;
    interestLastUpdateTimestampS: bigint;
    unclaimedSpreadFees: BigNumber;
    attributedBorrowValue: BigNumber;
    depositsPoolRewardManager: {
        $typeName: string;
        id: string;
        totalShares: bigint;
        poolRewards: {
            $typeName: string;
            id: string;
            poolRewardManagerId: string;
            coinType: string;
            startTimeMs: number;
            endTimeMs: number;
            totalRewards: BigNumber;
            allocatedRewards: BigNumber;
            cumulativeRewardsPerShare: BigNumber;
            numUserRewardManagers: bigint;
            rewardIndex: number;
            symbol: string;
            mintDecimals: number;
        }[];
        lastUpdateTimeMs: bigint;
    };
    borrowsPoolRewardManager: {
        $typeName: string;
        id: string;
        totalShares: bigint;
        poolRewards: {
            $typeName: string;
            id: string;
            poolRewardManagerId: string;
            coinType: string;
            startTimeMs: number;
            endTimeMs: number;
            totalRewards: BigNumber;
            allocatedRewards: BigNumber;
            cumulativeRewardsPerShare: BigNumber;
            numUserRewardManagers: bigint;
            rewardIndex: number;
            symbol: string;
            mintDecimals: number;
        }[];
        lastUpdateTimeMs: bigint;
    };
    availableAmountUsd: BigNumber;
    borrowedAmountUsd: BigNumber;
    depositedAmount: BigNumber;
    depositedAmountUsd: BigNumber;
    cTokenExchangeRate: BigNumber;
    borrowAprPercent: BigNumber;
    depositAprPercent: BigNumber;
    utilizationPercent: BigNumber;
    token: {
        decimals: number;
        description: string;
        iconUrl?: string | null;
        id?: string | null;
        name: string;
        symbol: string;
        coinType: string;
    };
    symbol: string;
    name: string;
    iconUrl: string | null | undefined;
    description: string;
    totalDeposits: BigNumber;
};
export declare const getStrategySimulatedObligation: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, deposits: StrategyDeposit[], _borrowedAmount: BigNumber) => ParsedObligation;
export declare const getStrategyDepositedAmount: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, obligation?: ParsedObligation) => BigNumber;
export declare const getStrategyBorrowedAmount: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, obligation?: ParsedObligation) => BigNumber;
export declare const getStrategyTvlAmount: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, obligation?: ParsedObligation) => BigNumber;
export declare const getStrategyExposure: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, obligation?: ParsedObligation) => BigNumber;
export declare const getStrategyStepMaxBorrowedAmount: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, deposits: StrategyDeposit[], borrowedAmount: BigNumber) => BigNumber;
export declare const getStrategyStepMaxWithdrawnAmount: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, deposits: StrategyDeposit[], borrowedAmount: BigNumber, withdrawCoinType: string) => BigNumber;
export declare const strategySimulateLoopToExposure: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, _deposits: StrategyDeposit[], _borrowedAmount: BigNumber, _targetBorrowedAmount: BigNumber | undefined, _targetExposure: BigNumber | undefined) => {
    deposits: StrategyDeposit[];
    borrowedAmount: BigNumber;
    obligation: ParsedObligation;
};
export declare const strategySimulateDeposit: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, _deposits: StrategyDeposit[], _borrowedAmount: BigNumber, deposit: StrategyDeposit) => {
    deposits: StrategyDeposit[];
    borrowedAmount: BigNumber;
    obligation: ParsedObligation;
};
export declare const strategySimulateDepositAndLoopToExposure: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, _deposits: StrategyDeposit[], _borrowedAmount: BigNumber, deposit: StrategyDeposit, targetExposure: BigNumber) => {
    deposits: StrategyDeposit[];
    borrowedAmount: BigNumber;
    obligation: ParsedObligation;
};
export declare const fetchStrategyGlobalTvlAmountUsdMap: () => Promise<Record<StrategyType, BigNumber | null> | undefined>;
export declare const getStrategyUnclaimedRewardsAmount: (reserveMap: Record<string, ParsedReserve>, rewardPriceMap: Record<string, BigNumber | undefined>, rewardCoinMetadataMap: Record<string, CoinMetadata>, rewardMap: RewardMap, lstMap: StrategyLstMap, strategyType: StrategyType, obligation?: ParsedObligation) => BigNumber;
export declare const getStrategyAprPercent: (reserveMap: Record<string, ParsedReserve>, lstStatsMap: Record<string, {
    lstToSuiExchangeRate: BigNumber;
    aprPercent: BigNumber;
}>, rewardMap: RewardMap, lstMap: StrategyLstMap, strategyType: StrategyType, obligation?: ParsedObligation, exposure?: BigNumber) => BigNumber;
export declare const getStrategyHealthPercent: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, obligation?: ParsedObligation, exposure?: BigNumber) => BigNumber;
export declare const getStrategyLiquidationPrice: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, obligation?: ParsedObligation, exposure?: BigNumber) => BigNumber | null;
export declare const strategyLoopToExposureTx: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, suiClient: SuiClient, suilendClient: SuilendClient, cetusSdk: CetusSdk, cetusPartnerId: string, _address: string, strategyOwnerCapId: TransactionObjectInput, obligationId: string | undefined, _deposits: StrategyDeposit[], _borrowedAmount: BigNumber, _targetBorrowedAmount: BigNumber | undefined, _targetExposure: BigNumber | undefined, // Must be defined if _targetBorrowedAmount is undefined
transaction: Transaction) => Promise<{
    deposits: StrategyDeposit[];
    borrowedAmount: BigNumber;
    transaction: Transaction;
}>;
export declare const strategyUnloopToExposureTx: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, suiClient: SuiClient, suilendClient: SuilendClient, cetusSdk: CetusSdk, cetusPartnerId: string, _address: string, strategyOwnerCapId: TransactionObjectInput, obligationId: string, _deposits: StrategyDeposit[], _borrowedAmount: BigNumber, _targetBorrowedAmount: BigNumber | undefined, _targetExposure: BigNumber | undefined, // Must be defined if _targetBorrowedAmount is undefined
transaction: Transaction, dryRunTransaction: (transaction: Transaction, setGasBudget?: boolean) => Promise<DevInspectResults>) => Promise<{
    deposits: StrategyDeposit[];
    borrowedAmount: BigNumber;
    transaction: Transaction;
}>;
export declare const strategyDepositTx: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, suiClient: SuiClient, suilendClient: SuilendClient, cetusSdk: CetusSdk, cetusPartnerId: string, _address: string, strategyOwnerCapId: TransactionObjectInput, obligationId: string | undefined, _deposits: StrategyDeposit[], _borrowedAmount: BigNumber, deposit: StrategyDeposit, transaction: Transaction, dryRunTransaction: (transaction: Transaction, setGasBudget?: boolean) => Promise<DevInspectResults>) => Promise<{
    deposits: StrategyDeposit[];
    borrowedAmount: BigNumber;
    transaction: Transaction;
}>;
export declare const strategyDepositAndLoopToExposureTx: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, suiClient: SuiClient, suilendClient: SuilendClient, cetusSdk: CetusSdk, cetusPartnerId: string, _address: string, strategyOwnerCapId: TransactionObjectInput, obligationId: string | undefined, _deposits: StrategyDeposit[], _borrowedAmount: BigNumber, deposit: StrategyDeposit, targetExposure: BigNumber, transaction: Transaction, dryRunTransaction: (transaction: Transaction, setGasBudget?: boolean) => Promise<DevInspectResults>) => Promise<{
    deposits: StrategyDeposit[];
    borrowedAmount: BigNumber;
    transaction: Transaction;
}>;
export declare const strategyWithdrawTx: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, suiClient: SuiClient, suilendClient: SuilendClient, cetusSdk: CetusSdk, cetusPartnerId: string, _address: string, strategyOwnerCapId: TransactionObjectInput, obligationId: string, _deposits: StrategyDeposit[], _borrowedAmount: BigNumber, withdraw: StrategyWithdraw, transaction: Transaction, dryRunTransaction: (transaction: Transaction, setGasBudget?: boolean) => Promise<DevInspectResults>, returnWithdrawnCoin?: boolean) => Promise<{
    deposits: StrategyDeposit[];
    borrowedAmount: BigNumber;
    transaction: Transaction;
    withdrawnCoin?: TransactionArgument;
}>;
export declare const strategyMaxWithdrawTx: (reserveMap: Record<string, ParsedReserve>, rewardPriceMap: Record<string, BigNumber | undefined>, rewardsMap: RewardsMap, lstMap: StrategyLstMap, strategyType: StrategyType, suiClient: SuiClient, suilendClient: SuilendClient, cetusSdk: CetusSdk, cetusPartnerId: string, _address: string, strategyOwnerCapId: TransactionObjectInput, obligationId: string, _deposits: StrategyDeposit[], _borrowedAmount: BigNumber, withdrawCoinType: string, transaction: Transaction, dryRunTransaction: (transaction: Transaction, setGasBudget?: boolean) => Promise<DevInspectResults>) => Promise<{
    deposits: StrategyDeposit[];
    borrowedAmount: BigNumber;
    transaction: Transaction;
}>;
export declare const strategyAdjustRepayTx: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, suiClient: SuiClient, suilendClient: SuilendClient, cetusSdk: CetusSdk, cetusPartnerId: string, _address: string, strategyOwnerCapId: TransactionObjectInput, obligationId: string, _deposits: StrategyDeposit[], _borrowedAmount: BigNumber, flashLoanBorrowedAmount: BigNumber, transaction: Transaction, dryRunTransaction: (transaction: Transaction, setGasBudget?: boolean) => Promise<DevInspectResults>) => Promise<{
    deposits: StrategyDeposit[];
    borrowedAmount: BigNumber;
    transaction: Transaction;
}>;
export declare const strategyDepositAdjustWithdrawTx: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, suiClient: SuiClient, suilendClient: SuilendClient, cetusSdk: CetusSdk, cetusPartnerId: string, _address: string, strategyOwnerCapId: TransactionObjectInput, obligationId: string, _deposits: StrategyDeposit[], _borrowedAmount: BigNumber, flashLoanBorrowedAmount: BigNumber, transaction: Transaction, dryRunTransaction: (transaction: Transaction, setGasBudget?: boolean) => Promise<DevInspectResults>) => Promise<{
    deposits: StrategyDeposit[];
    borrowedAmount: BigNumber;
    transaction: Transaction;
}>;
export declare const strategyAdjustTx: (reserveMap: Record<string, ParsedReserve>, lstMap: StrategyLstMap, strategyType: StrategyType, suiClient: SuiClient, suilendClient: SuilendClient, cetusSdk: CetusSdk, cetusPartnerId: string, _address: string, strategyOwnerCapId: TransactionObjectInput, obligation: ParsedObligation, _deposits: StrategyDeposit[], _borrowedAmount: BigNumber, targetExposure: BigNumber, transaction: Transaction, dryRunTransaction: (transaction: Transaction, setGasBudget?: boolean) => Promise<DevInspectResults>) => Promise<{
    deposits: StrategyDeposit[];
    borrowedAmount: BigNumber;
    transaction: Transaction;
}>;
